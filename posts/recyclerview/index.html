<!DOCTYPE html><html lang="es-ES" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="RecyclerView" /><meta name="author" content="mdoradom" /><meta property="og:locale" content="es_ES" /><meta name="description" content="RecyclerView" /><meta property="og:description" content="RecyclerView" /><link rel="canonical" href="https://mdoradom.github.io/documentacion/posts/recyclerview/" /><meta property="og:url" content="https://mdoradom.github.io/documentacion/posts/recyclerview/" /><meta property="og:site_name" content="Documentación" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-08T10:23:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="RecyclerView" /><meta name="twitter:site" content="@mariiiodorado_" /><meta name="twitter:creator" content="@mariiiodorado_" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"mdoradom","url":"https://github.com/mdoradom/"},"dateModified":"2022-06-08T10:23:00+02:00","datePublished":"2022-06-08T10:23:00+02:00","description":"RecyclerView","headline":"RecyclerView","mainEntityOfPage":{"@type":"WebPage","@id":"https://mdoradom.github.io/documentacion/posts/recyclerview/"},"url":"https://mdoradom.github.io/documentacion/posts/recyclerview/"}</script><title>RecyclerView | Documentación</title><link rel="apple-touch-icon" sizes="180x180" href="/documentacion/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/documentacion/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/documentacion/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/documentacion/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/documentacion/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Documentación"><meta name="application-name" content="Documentación"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/documentacion/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/documentacion/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/documentacion/" class="mx-auto"> <img src="/documentacion/assets/images/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/documentacion/">Documentación</a></div><div class="site-subtitle font-italic">Sobre cosas en general</div></div><ul class="w-100"><li class="nav-item"> <a href="/documentacion/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/documentacion/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/documentacion/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/documentacion/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/documentacion/links/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>LINKS</span> </a><li class="nav-item"> <a href="/documentacion/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ACERCA DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/mdoradom" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/mariiiodorado_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mariodoradomartinez','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/documentacion/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/documentacion/"> Inicio </a> </span> <span>RecyclerView</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>RecyclerView</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1654676580" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 08/06/2022 </em> </span><div class="d-flex justify-content-between"> <span> Por <em> <a href="https://github.com/mdoradom/">mdoradom</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3517 palabras"> <em>19 min</em> de lectura</span></div></div></div><div class="post-content"><h1 id="recyclerview">RecyclerView</h1><p><a href="https://developer.android.com/guide/topics/ui/layout/recyclerview">RecyclerView</a> es un widget para mostrar una lista de elementos.</p><p>Desarrollaremos una app que muestra una lista de <strong>elementos genéricos</strong>, y que permite añadir, ver o eliminar un elemento.</p><p><img data-src="https://i.imgur.com/DyQGW9J.gif" alt="" data-proofer-ignore></p><p><a href="https://github.com/gerardfp/recyclerview">https://github.com/gerardfp/recyclerview</a></p><h2 id="crea-el-proyecto"><span class="mr-2">Crea el proyecto</span><a href="#crea-el-proyecto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Clona (o descarga) este repositorio: <a href="https://github.com/gerardfp/recyclerview_template">https://github.com/gerardfp/recyclerview_template</a></p><p>En esta plantilla de proyecto se ha implementado la base de la arquitectura MVVM:</p><ul><li><p>Se ha configurado la navegación con las siguientes <strong>Views</strong>:</p><ul><li><p><code class="language-plaintext highlighter-rouge">MostrarElementoFragment</code>: Muestra el detalle de un Elemento</p><li><p><code class="language-plaintext highlighter-rouge">NuevoElementoFragment</code>: Permite introducir los datos y añadir un nuevo Elemento a la lista</p><li><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment</code>: Muestra la lista de todos los Elementos. También tiene un FloatingActionButton, que permite navegar hacia el NuevoElementoFragment.</p></ul><p><img data-src="https://i.imgur.com/t9VENJd.png" alt="" data-proofer-ignore></p><li><p>Se ha añadido un <strong>Model</strong> para almacenar los Elementos:</p><p>La clase <code class="language-plaintext highlighter-rouge">Elemento</code> simplemente es para contener los datos de un Elemento.</p><p><code class="language-plaintext highlighter-rouge">Elemento.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Elemento</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">nombre</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">descripcion</span><span class="o">;</span>
    <span class="kt">float</span> <span class="n">valoracion</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Elemento</span><span class="o">(</span><span class="nc">String</span> <span class="n">nombre</span><span class="o">,</span> <span class="nc">String</span> <span class="n">descripcion</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">nombre</span> <span class="o">=</span> <span class="n">nombre</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">descripcion</span> <span class="o">=</span> <span class="n">descripcion</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>La clase <code class="language-plaintext highlighter-rouge">ElementosRepositorio</code> mantiene los Elementos en un <code class="language-plaintext highlighter-rouge">ArrayList</code>:</p><ul><li><p>En el constructor se añaden algunos Elementos de ejemplo.</p><li><p>Tiene dos métodos para <code class="language-plaintext highlighter-rouge">insertar()</code> o <code class="language-plaintext highlighter-rouge">eliminar()</code> un Elemento, que retornan en un <em>callback</em>, el <code class="language-plaintext highlighter-rouge">ArrayList</code> de Elementos resultante.</p><p>También tiene un método para actualizar la valoración de un Elemento.</p></ul><p><code class="language-plaintext highlighter-rouge">ElementosRepositorio.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElementosRepositorio</span> <span class="o">{</span>

    <span class="nc">List</span> <span class="o">&lt;</span> <span class="nc">Elemento</span> <span class="o">&gt;</span> <span class="n">elementos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span> <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="o">();</span>

    <span class="kd">interface</span> <span class="nc">Callback</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">cuandoFinalice</span><span class="o">(</span><span class="nc">List</span> <span class="o">&lt;</span> <span class="nc">Elemento</span> <span class="o">&gt;</span> <span class="n">elementos</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nc">ElementosRepositorio</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elemento químico"</span><span class="o">,</span> <span class="s">"Es un átomo con moléculas, aquella sustancia que no puede ser descompuesta mediante una reacción química, en otras más simples. Pueden existir dos átomos de un mismo elemento con características distintas y, en el caso de que estos posean número másico distinto, pertenecen al mismo elemento pero en lo que se conoce como uno de sus isótopos."</span><span class="o">));</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elemento de un conjunto"</span><span class="o">,</span> <span class="s">"En teoría de conjuntos, un elemento o miembro de un conjunto (o familia de conjuntos) es un objeto que forma parte de ese conjunto (o familia)."</span><span class="o">));</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elemento sintético"</span><span class="o">,</span> <span class="s">"En química, un elemento sintético es un elemento químico que no aparece de forma natural en la Tierra, y solo puede ser creado artificialmente."</span><span class="o">));</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elemento algebraico"</span><span class="o">,</span> <span class="s">"En matemáticas, más concretamente en álgebra abstracta y teoría de cuerpos, se dice que un elemento es algebraico sobre un cuerpo si es raíz de algún polinomio con coeficientes en dicho cuerpo. Los elementos algebraicos sobre el cuerpo de los números racionales reciben el nombre de números algebraicos."</span><span class="o">));</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elementos de la naturaleza"</span><span class="o">,</span> <span class="s">"Los cuatro o cinco elementos de la naturaleza —normalmente agua, tierra, fuego y aire, a los que se añade la quintaesencia o éter— eran, para muchas doctrinas antiguas, los constituyentes básicos de la materia y explicaban el comportamiento de la naturaleza. El modelo estuvo vigente hasta que la ciencia moderna empezó a desentrañar los elementos y reacciones químicas."</span><span class="o">));</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="s">"Elemento constructivo"</span><span class="o">,</span> <span class="s">"Un elemento constructivo es cada uno de los componentes materiales que integran una obra de construcción. Se suelen clasificar en estructurales y compartimentadores."</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="nc">List</span> <span class="o">&lt;</span> <span class="nc">Elemento</span> <span class="o">&gt;</span> <span class="n">obtener</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">elementos</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">insertar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">,</span> <span class="nc">Callback</span> <span class="n">callback</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">elemento</span><span class="o">);</span>
        <span class="n">callback</span><span class="o">.</span><span class="na">cuandoFinalice</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">eliminar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">,</span> <span class="nc">Callback</span> <span class="n">callback</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">elementos</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">elemento</span><span class="o">);</span>
        <span class="n">callback</span><span class="o">.</span><span class="na">cuandoFinalice</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">actualizar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">,</span> <span class="kt">float</span> <span class="n">valoracion</span><span class="o">,</span> <span class="nc">Callback</span> <span class="n">callback</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">elemento</span><span class="o">.</span><span class="na">valoracion</span> <span class="o">=</span> <span class="n">valoracion</span><span class="o">;</span>
        <span class="n">callback</span><span class="o">.</span><span class="na">cuandoFinalice</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><li><p>Se ha creado un <code class="language-plaintext highlighter-rouge">ViewModel</code> que expone las acciones sobre el modelo (insertar y eliminar), guardando el array de Elementos en un <code class="language-plaintext highlighter-rouge">MutableLiveData</code> que pueda ser observado por las vistas. También expone la acción de actualizar la valoración.</p><p><code class="language-plaintext highlighter-rouge">ElementosViewModel.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">android.app.Application</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">androidx.annotation.NonNull</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">androidx.lifecycle.AndroidViewModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">androidx.lifecycle.MutableLiveData</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElementosViewModel</span> <span class="kd">extends</span> <span class="nc">AndroidViewModel</span> <span class="o">{</span>

    <span class="nc">ElementosRepositorio</span> <span class="n">elementosRepositorio</span><span class="o">;</span>

    <span class="nc">MutableLiveData</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;&gt;</span> <span class="n">listElementosMutableLiveData</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MutableLiveData</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="nf">ElementosViewModel</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">Application</span> <span class="n">application</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">application</span><span class="o">);</span>

        <span class="n">elementosRepositorio</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ElementosRepositorio</span><span class="o">();</span>

        <span class="n">listElementosMutableLiveData</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">elementosRepositorio</span><span class="o">.</span><span class="na">obtener</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nc">MutableLiveData</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;&gt;</span> <span class="nf">obtener</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">listElementosMutableLiveData</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">insertar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">){</span>
        <span class="n">elementosRepositorio</span><span class="o">.</span><span class="na">insertar</span><span class="o">(</span><span class="n">elemento</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ElementosRepositorio</span><span class="o">.</span><span class="na">Callback</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cuandoFinalice</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">listElementosMutableLiveData</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">eliminar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">){</span>
        <span class="n">elementosRepositorio</span><span class="o">.</span><span class="na">eliminar</span><span class="o">(</span><span class="n">elemento</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ElementosRepositorio</span><span class="o">.</span><span class="na">Callback</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cuandoFinalice</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">listElementosMutableLiveData</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">actualizar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">,</span> <span class="kt">float</span> <span class="n">valoracion</span><span class="o">){</span>
        <span class="n">elementosRepositorio</span><span class="o">.</span><span class="na">actualizar</span><span class="o">(</span><span class="n">elemento</span><span class="o">,</span> <span class="n">valoracion</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ElementosRepositorio</span><span class="o">.</span><span class="na">Callback</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cuandoFinalice</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">listElementosMutableLiveData</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div></ul><h3 id="viewmodel-compartido"><span class="mr-2">ViewModel compartido</span><a href="#viewmodel-compartido" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>La novedad de esta arquitectura MVVM es que el ViewModel es compartido por los 3 fragments.</p><p>Cuando se obtiene el ViewModel desde un Fragment, hay dos formas de hacerlo:</p><ul><li>Pasando <code class="language-plaintext highlighter-rouge">this</code> (=el propio Fragment) al constructor de <code class="language-plaintext highlighter-rouge">ViewModelProvider</code>. En tal caso se obtiene una instancia del ViewModel propia para el Fragment, a la que solo él tiene acceso.<li>Pasando <code class="language-plaintext highlighter-rouge">requireActivity()</code> (=la Activity en la que esté el Fragment) al constructor de <code class="language-plaintext highlighter-rouge">ViewModelProvider</code>. Se obtiene una instancia del ViewModel propia de la Activity, que es compartida por todos los Fragments que se muestren en dicha Activity.</ul><p>Es decir, si desde los Fragment obtenemos el <code class="language-plaintext highlighter-rouge">ElementosViewModel</code> con <code class="language-plaintext highlighter-rouge">this</code>, así:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">ElementosViewModel</span> <span class="n">elementosViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ViewModelProvider</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="nc">ElementosViewModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></table></code></div></div><p>cada Fragment obtiene una instancia del ViewModel propia, a la que solo él tiene acceso:</p><p><img data-src="https://i.imgur.com/krWSh4h.png" alt="" data-proofer-ignore></p><p>Si en cambio, desde los Fragments obtenemos el <code class="language-plaintext highlighter-rouge">ElementosViewModel</code> con <code class="language-plaintext highlighter-rouge">requireActivity()</code>, así:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">ElementosViewModel</span> <span class="n">elementosViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ViewModelProvider</span><span class="o">(</span><span class="n">requireActivity</span><span class="o">()).</span><span class="na">get</span><span class="o">(</span><span class="nc">ElementosViewModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></table></code></div></div><p>todos los Fragment que estén en la misma Activity obtienen la misma instancia del ViewModel, con la que pueden compartir datos ente sí:</p><p><img data-src="https://i.imgur.com/RruFgkj.png" alt="" data-proofer-ignore></p><p>En esta app usamos el ViewModel compartido, ya que los 3 fragment van a compartir el mismo array de Elementos, y también permitirá compartir el dato del Elemento seleccionado entre la pantalla de la lista y la pantalla del detalle.</p><h2 id="recyclerview-1"><span class="mr-2">RecyclerView</span><a href="#recyclerview-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">RecyclerView</code> es un widget que permite mostrar y hacer <em>scroll</em> en una lista de elementos basados en grandes conjuntos de datos (o datos que cambian frecuentemente). Es una versión más avanzada y flexible del <code class="language-plaintext highlighter-rouge">ListView</code>.</p><p><img data-src="https://i.imgur.com/bR89Mt2.png" alt="" data-proofer-ignore></p><p>Permite mostrar los datos con 4 disposiciones diferentes:</p><p><img data-src="https://i.imgur.com/iNZvyRT.png" alt="" data-proofer-ignore></p><p>Para utilizar un RecyclerView son necesarios 3 componentes que funcionan conjuntamente para mostrar los datos:</p><ul><li><p><code class="language-plaintext highlighter-rouge">RecyclerView</code>: Es el contenedor principal para la interfaz de usuario.</p><li><p><code class="language-plaintext highlighter-rouge">ViewHolder</code>: Es la plantilla para mostrar un elemento en el RecyclerView. Cada ítem que se muestra en el RecyclerView es una copia del ViewHolder. Por ejemplo, si el RecyclerView ha de mostrar una lista de productos, cada ViewHolder representa un único producto.</p><p><img data-src="https://i.imgur.com/plSaJ22.png" alt="" data-proofer-ignore></p><li><p><code class="language-plaintext highlighter-rouge">Adapter</code>: El adaptador es el encargado de crear los ViewHolder, rellenarlos con los datos, y añadirlos al RecyclerView.</p><p><img data-src="https://i.imgur.com/sjEOsYP.png" alt="" data-proofer-ignore></p></ul><h2 id="recyclerelementosfragment"><span class="mr-2">RecyclerElementosFragment</span><a href="#recyclerelementosfragment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Empezaremos programando el <code class="language-plaintext highlighter-rouge">RecyclerElementosFragment</code> para que muestre en un <code class="language-plaintext highlighter-rouge">RecyclerView</code> la lista de Elementos (los del ArrayList).</p><p>Será necesario poner a punto los 3 componentes:</p><ul><li>RecyclerView<li>ViewHolder<li>Adapter</ul><h3 id="recyclerview-2"><span class="mr-2">RecyclerView</span><a href="#recyclerview-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>El <code class="language-plaintext highlighter-rouge">RecyclerView</code> es solamente el contenedor en el cual se van a mostrar los datos. Se añade al layout en el cual se tiene que mostrar la lista. En esta app, en el layout del RecyclerElementosFragment.</p><p>En principio el RecyclerView estará vacío, y será más adelante cuando se rellenará (mediante código Java) con los Elementos del ArrayList.</p><p>Lo único a tener en cuenta cuando se añade al layout es especificar la disposición de los ViewHolder; se hace con el atributo <code class="language-plaintext highlighter-rouge">app:layoutManager</code> y en esta app utilizamos el <code class="language-plaintext highlighter-rouge">LinearLayoutManager</code> (lista vertical).</p><p>Añade el <code class="language-plaintext highlighter-rouge">&lt;RecyclerView&gt;</code> al fichero de layout <code class="language-plaintext highlighter-rouge">fragment_recycler_elementos.xml</code>:</p><p><code class="language-plaintext highlighter-rouge">res/layout/fragment_recycler_elementos.xml</code></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nt">&lt;FrameLayout</span> <span class="err">...</span><span class="nt">&gt;</span>
    //...

    <span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
        <span class="na">android:id=</span><span class="s">"@+id/recyclerView"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">app:layoutManager=</span><span class="s">"androidx.recyclerview.widget.LinearLayoutManager"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/FrameLayout&gt;</span>
</pre></table></code></div></div><h3 id="viewholder"><span class="mr-2">ViewHolder</span><a href="#viewholder" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>El <code class="language-plaintext highlighter-rouge">ViewHolder</code> és la plantilla para mostrar un Elemento de la lista. Para crearla, habitualmente se usa:</p><ul><li><p>Un fichero layout con la disposición de los widgets de la plantilla (TextView, ImageView, etc…)</p><li><p>Una clase que habilite el ViewBinding para poder acceder a los widgets.</p></ul><p>Crea el fichero de layout <code class="language-plaintext highlighter-rouge">viewholder_elemento.xml</code>, con un TextView para mostrar el nombre del Elemento, y un RatingBar para la <code class="language-plaintext highlighter-rouge">valoracion</code>.</p><p><code class="language-plaintext highlighter-rouge">viewholder_elemento.xml</code></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">"@+id/nombre"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:textSize=</span><span class="s">"32sp"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;RatingBar</span>
        <span class="na">android:id=</span><span class="s">"@+id/valoracion"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:numStars=</span><span class="s">"5"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></table></code></div></div><p><img data-src="https://i.imgur.com/et35grX.png" alt="" data-proofer-ignore></p><p>El TextView y el RatingBar se rellenarán con los datos de un Elemento del array. Para ello, creamos una clase en la que guardaremos la variable <code class="language-plaintext highlighter-rouge">binding</code>, mediante la cual accederemos al TextView y al RatingBar</p><p>Llamaremos a esta clase <code class="language-plaintext highlighter-rouge">ElementoViewHolder</code>. Debe extender de la clase <code class="language-plaintext highlighter-rouge">RecyclerView.ViewHolder</code>.</p><p>Añade la clase <code class="language-plaintext highlighter-rouge">ElementoViewHolder</code> como clase interna de <code class="language-plaintext highlighter-rouge">RecyclerElementosFragment</code>:</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nc">ElementoViewHolder</span> <span class="kd">extends</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ViewholderElementoBinding</span> <span class="n">binding</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">ElementoViewHolder</span><span class="o">(</span><span class="nc">ViewholderElementoBinding</span> <span class="n">binding</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">binding</span><span class="o">.</span><span class="na">getRoot</span><span class="o">());</span>
            <span class="k">this</span><span class="o">.</span><span class="na">binding</span> <span class="o">=</span> <span class="n">binding</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p><em>Para crear la clase del ViewHolder, hay dos cosas a tener en cuenta: (1) escoger un nombre adecuado y (2) usar la clase ViewBinding correspondiente al fichero de layout. En este caso el fichero de layout es <code class="language-plaintext highlighter-rouge">viewholder_elemento.xml</code> así que la clase correspondiente es <code class="language-plaintext highlighter-rouge">ViewholderElementoBinding</code>. El resto de código la mayoría de veces es tal cual.</em></p><h3 id="adapter"><span class="mr-2">Adapter</span><a href="#adapter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>El <code class="language-plaintext highlighter-rouge">Adapter</code> será el encargado de crear las copias del ViewHolder, y rellenarlas con los datos de los Elementos del ArrayList.</p><p>Para crear un Adaptador hay que extender la clase <code class="language-plaintext highlighter-rouge">RecyclerView.Adapter</code> y se debe especificar en el diamante <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> la clase del ViewHolder.</p><p>Se deben anular 3 métodos:</p><ul><li><p><code class="language-plaintext highlighter-rouge">onCreateViewHolder()</code>: este método es llamado por el RecyclerView cuando necesita <strong>crear</strong> una nueva copia del ViewHolder. Se debe retornar una instancia del ViewHolder (en el constructor se inicializa el ViewBinding).</p><li><p><code class="language-plaintext highlighter-rouge">onBindViewHolder()</code>: lo llama el RecyclerView para <strong>rellenar</strong> los datos de un ViewHolder en una posición determinada. Se reciben los parámetros <code class="language-plaintext highlighter-rouge">holder</code> y <code class="language-plaintext highlighter-rouge">position</code>, que indican el ViewHolder que hay que rellenar y en qué posición está en el RecyclerView.</p><li><p><code class="language-plaintext highlighter-rouge">getItemCount()</code>: lo llama el RecyclerView para saber cuántos ViewHolder en total se van a mostrar.</p></ul><p>Por último, también es muy común hacer que el Adaptador mantenga una referencia al ArrayList de los elementos. Para ello, se declara una variable, y un método para establecerla. Un aspecto clave de este método es la llamada a <code class="language-plaintext highlighter-rouge">notifyDatasetChanged()</code>. Este método notifica al RecyclerView que al array ha cambiado y que debe volver a regenerar todos los ViewHolders.</p><p>El código del adaptador queda así:</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="kd">class</span> <span class="nc">ElementosAdapter</span> <span class="kd">extends</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="nc">ElementoViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">;</span>

        <span class="nd">@NonNull</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">ElementoViewHolder</span> <span class="nf">onCreateViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ElementoViewHolder</span><span class="o">(</span><span class="nc">ViewholderElementoBinding</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">getLayoutInflater</span><span class="o">(),</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ElementoViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>

            <span class="nc">Elemento</span> <span class="n">elemento</span> <span class="o">=</span> <span class="n">elementos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>

            <span class="n">holder</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">nombre</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">nombre</span><span class="o">);</span>
            <span class="n">holder</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">valoracion</span><span class="o">.</span><span class="na">setRating</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">valoracion</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">elementos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">elementos</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">establecerLista</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">){</span>
            <span class="k">this</span><span class="o">.</span><span class="na">elementos</span> <span class="o">=</span> <span class="n">elementos</span><span class="o">;</span>
            <span class="n">notifyDataSetChanged</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>Para crear la clase del Adaptador, hay que tener en cuenta:</p><ol><li><p>La clase del ViewHolder (en este caso <code class="language-plaintext highlighter-rouge">ElementoViewHolder</code>)</p><li><p>La clase de los ítems del ArrayList (en este caso <code class="language-plaintext highlighter-rouge">Elemento</code>)</p><li><p>Qué campos hay que rellenar del <code class="language-plaintext highlighter-rouge">holder</code> (a los que se accede mediante la variable <code class="language-plaintext highlighter-rouge">binding</code>) y con qué datos del ArrayList hay que rellenarlos</p></ol><p>Una vez creada la clase, hay que crear un objeto y asignarlo al RecyclerView con el método <code class="language-plaintext highlighter-rouge">setAdapter()</code>.</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ...</span>

        <span class="nc">ElementosAdapter</span> <span class="n">elementosAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ElementosAdapter</span><span class="o">();</span>
        <span class="n">binding</span><span class="o">.</span><span class="na">recyclerView</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">elementosAdapter</span><span class="o">);</span>

    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>El último paso solo es asignar el array de Elementos del Adaptador (la variable <code class="language-plaintext highlighter-rouge">elementos</code>). El array se observa del ViewModel y se asigna llamando al método <code class="language-plaintext highlighter-rouge">establecerLista()</code>.</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ...</span>

        <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">obtener</span><span class="o">().</span><span class="na">observe</span><span class="o">(</span><span class="n">getViewLifecycleOwner</span><span class="o">(),</span> <span class="k">new</span> <span class="nc">Observer</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;&gt;()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onChanged</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">elementosAdapter</span><span class="o">.</span><span class="na">establecerLista</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

    <span class="o">}</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>El código completo del <code class="language-plaintext highlighter-rouge">RecyclerElementosFragment</code> queda así:</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">FragmentRecyclerElementosBinding</span> <span class="n">binding</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ElementosViewModel</span> <span class="n">elementosViewModel</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">NavController</span> <span class="n">navController</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">binding</span> <span class="o">=</span> <span class="nc">FragmentRecyclerElementosBinding</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">inflater</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">)).</span><span class="na">getRoot</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">elementosViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ViewModelProvider</span><span class="o">(</span><span class="n">requireActivity</span><span class="o">()).</span><span class="na">get</span><span class="o">(</span><span class="nc">ElementosViewModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">navController</span> <span class="o">=</span> <span class="nc">Navigation</span><span class="o">.</span><span class="na">findNavController</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

        <span class="c1">// navegar a NuevoElemento cuando se hace click en el FloatingActionButton</span>
        <span class="n">binding</span><span class="o">.</span><span class="na">irANuevoElemento</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">navController</span><span class="o">.</span><span class="na">navigate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_recyclerElementosFragment_to_nuevoElementoFragment</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">// crear el Adaptador</span>
        <span class="nc">ElementosAdapter</span> <span class="n">elementosAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ElementosAdapter</span><span class="o">();</span>

        <span class="c1">// asociar el Adaptador con el RecyclerView</span>
        <span class="n">binding</span><span class="o">.</span><span class="na">recyclerView</span><span class="o">.</span><span class="na">setAdapter</span><span class="o">(</span><span class="n">elementosAdapter</span><span class="o">);</span>

        <span class="c1">// obtener el array de Elementos, y pasarselo al Adaptador</span>
        <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">obtener</span><span class="o">().</span><span class="na">observe</span><span class="o">(</span><span class="n">getViewLifecycleOwner</span><span class="o">(),</span> <span class="k">new</span> <span class="nc">Observer</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;&gt;()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onChanged</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">elementosAdapter</span><span class="o">.</span><span class="na">establecerLista</span><span class="o">(</span><span class="n">elementos</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>

    <span class="kd">class</span> <span class="nc">ElementosAdapter</span> <span class="kd">extends</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="nc">ElementoViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

        <span class="c1">// referencia al Array que obtenemos del ViewModel</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">;</span>

        <span class="c1">// crear un nuevo ViewHolder</span>
        <span class="nd">@NonNull</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">ElementoViewHolder</span> <span class="nf">onCreateViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ViewGroup</span> <span class="n">parent</span><span class="o">,</span> <span class="kt">int</span> <span class="n">viewType</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ElementoViewHolder</span><span class="o">(</span><span class="nc">ViewholderElementoBinding</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">getLayoutInflater</span><span class="o">(),</span> <span class="n">parent</span><span class="o">,</span> <span class="kc">false</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="c1">// rellenar un ViewHolder en una posición del Recycler con los datos del elemento que</span>
        <span class="c1">// esté en esa misma posición en el Array</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ElementoViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>

            <span class="nc">Elemento</span> <span class="n">elemento</span> <span class="o">=</span> <span class="n">elementos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>

            <span class="n">holder</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">nombre</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">nombre</span><span class="o">);</span>
            <span class="n">holder</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">valoracion</span><span class="o">.</span><span class="na">setRating</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">valoracion</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// informar al Recycler de cuántos elementos habrá en la lista</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">elementos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">elementos</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// establecer la referencia a la lista, y notificar al Recycler para que se regenere</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">establecerLista</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementos</span><span class="o">){</span>
            <span class="k">this</span><span class="o">.</span><span class="na">elementos</span> <span class="o">=</span> <span class="n">elementos</span><span class="o">;</span>
            <span class="n">notifyDataSetChanged</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Clase para inicializar el ViewBinding en los ViewHolder</span>
    <span class="kd">class</span> <span class="nc">ElementoViewHolder</span> <span class="kd">extends</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ViewholderElementoBinding</span> <span class="n">binding</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">ElementoViewHolder</span><span class="o">(</span><span class="nc">ViewholderElementoBinding</span> <span class="n">binding</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">binding</span><span class="o">.</span><span class="na">getRoot</span><span class="o">());</span>
            <span class="k">this</span><span class="o">.</span><span class="na">binding</span> <span class="o">=</span> <span class="n">binding</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas ahora la app, se debería mostrar la lista de elementos.</strong></p><h2 id="interacción-con-los-viewholder"><span class="mr-2">Interacción con los ViewHolder</span><a href="#interacción-con-los-viewholder" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Los ViewHolder que se muestran en el RecyclerView no responden, por el momento, a ningún tipo de interacción más allá del <em>scroll</em>. Cuando se hace click en ellos “no hacen nada”.</p><p>Añadiremos tres interacciones:</p><ul><li><p>Cambiar la valoración de un Elemento tocando el RatingBar</p><li><p>Eliminar un Elemento cuando se desliza el dedo hacia un lado.</p><li><p>Navegar a la pantalla para mostrar el detalle del Elemento cuando se clica en el ViewHolder</p></ul><h3 id="widgets"><span class="mr-2">Widgets</span><a href="#widgets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los widgets que contiene el ViewHolder (TextViews, ImageViews, Buttons, etc…) son accesibles a través de la variable <code class="language-plaintext highlighter-rouge">binding</code>. En esta app nos interesa el widget <code class="language-plaintext highlighter-rouge">RatingBar</code> con el que podremos “valorar” los Elementos.</p><p>El widget <code class="language-plaintext highlighter-rouge">RatingBar</code> permite establecer un listener <code class="language-plaintext highlighter-rouge">OnRatingBarChangeListener</code> que se activa cuando se cambia el número de estrellas.</p><p>En el <em>callback</em> se pasa el nuevo <code class="language-plaintext highlighter-rouge">rating</code> y un parámetro <code class="language-plaintext highlighter-rouge">fromUser</code>, que indica si el rating ha cambiado porque el usuario ha tocado las estrellas, o bien si el rating ha cambiado porque se ha llamado al método <code class="language-plaintext highlighter-rouge">setRating()</code> desde código Java.</p><p>Estableceremos los listeners de los widgets dentro del método <code class="language-plaintext highlighter-rouge">onBindViewHolder()</code> del Adaptador, ya que es ahí donde se asocian (<em>bind</em>) con un Elemento concreto del Array, de forma que quedará vinculado el cambio de rating con ese Elemento en particular:</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">// ...</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ElementoViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="n">holder</span><span class="o">.</span><span class="na">binding</span><span class="o">.</span><span class="na">valoracion</span><span class="o">.</span><span class="na">setOnRatingBarChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">RatingBar</span><span class="o">.</span><span class="na">OnRatingBarChangeListener</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRatingChanged</span><span class="o">(</span><span class="nc">RatingBar</span> <span class="n">ratingBar</span><span class="o">,</span> <span class="kt">float</span> <span class="n">rating</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">fromUser</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">fromUser</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">actualizar</span><span class="o">(</span><span class="n">elemento</span><span class="o">,</span> <span class="n">rating</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">});</span>

<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas la app, se debería poder cambiar la valoración de un Elemento.</strong></p><h3 id="itemtouchhelper"><span class="mr-2">ItemTouchHelper</span><a href="#itemtouchhelper" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los gestos sobre un ViewHolder (swipe y move) se implementan usando la clase <code class="language-plaintext highlighter-rouge">ItemTouchHelper</code>. Hay que crear una instancia de esta clase definiendo las acciones a realizar cuando se produzcan los gestos, y vincularla al RecyclerView.</p><p>En el constructor le pasamos el <em>callback</em> mediante el cual nos notificará los gestos que se han realizado.</p><p>En el constructor del <em>callback</em> indicamos los tipos de gestos que queremos permitir, y anulamos dos métodos:</p><ul><li><p><code class="language-plaintext highlighter-rouge">onMove()</code>: se llamará cada vez que un ViewHolder sea arrastrado hacia arriba o hacia abajo.</p><li><p><code class="language-plaintext highlighter-rouge">onSwiped()</code>: se llamará cada vez que un ViewHolder sea arrastrado a izquerda o derecha.</p></ul><p>Para esta app solamente implementaremos <code class="language-plaintext highlighter-rouge">onSwiped()</code> y la acción que realizaremos será eliminar el Elemento que se ha deslizado.</p><p>El callback <code class="language-plaintext highlighter-rouge">onSwiped()</code> nos pasa el ViewHolder que se ha deslizado, y podemos obtener su posición en el RecyclerView con <code class="language-plaintext highlighter-rouge">getAdapterPosition()</code>.</p><p>Para obtener el objeto Elemento que está asociado al ViewHolder de esa posición añadiremos un método al <code class="language-plaintext highlighter-rouge">ElementosAdapter</code> que nos retorne dicho Elemento.</p><p>Una vez obtenido el Elemento que está asociado al ViewHolder que se ha deslizado, llamamos al método <code class="language-plaintext highlighter-rouge">eliminar()</code> del ViewModel, para que lo elimine.</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RecyclerElementosFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ...</span>

        <span class="k">new</span> <span class="nf">ItemTouchHelper</span><span class="o">(</span><span class="k">new</span> <span class="nc">ItemTouchHelper</span><span class="o">.</span><span class="na">SimpleCallback</span><span class="o">(</span>
                <span class="nc">ItemTouchHelper</span><span class="o">.</span><span class="na">UP</span> <span class="o">|</span> <span class="nc">ItemTouchHelper</span><span class="o">.</span><span class="na">DOWN</span><span class="o">,</span>
                <span class="nc">ItemTouchHelper</span><span class="o">.</span><span class="na">RIGHT</span>  <span class="o">|</span> <span class="nc">ItemTouchHelper</span><span class="o">.</span><span class="na">LEFT</span><span class="o">)</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onMove</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">RecyclerView</span> <span class="n">recyclerView</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">viewHolder</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSwiped</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">ViewHolder</span> <span class="n">viewHolder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">direction</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">posicion</span> <span class="o">=</span> <span class="n">viewHolder</span><span class="o">.</span><span class="na">getAdapterPosition</span><span class="o">();</span>
                <span class="nc">Elemento</span> <span class="n">elemento</span> <span class="o">=</span> <span class="n">elementosAdapter</span><span class="o">.</span><span class="na">obtenerElemento</span><span class="o">(</span><span class="n">posicion</span><span class="o">);</span>
                <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">eliminar</span><span class="o">(</span><span class="n">elemento</span><span class="o">);</span>

            <span class="o">}</span>
        <span class="o">}).</span><span class="na">attachToRecyclerView</span><span class="o">(</span><span class="n">binding</span><span class="o">.</span><span class="na">recyclerView</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="c1">//...</span>

    <span class="kd">class</span> <span class="nc">ElementosAdapter</span> <span class="kd">extends</span> <span class="nc">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="nc">ElementoViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="c1">// ...</span>

        <span class="kd">public</span> <span class="nc">Elemento</span> <span class="nf">obtenerElemento</span><span class="o">(</span><span class="kt">int</span> <span class="n">posicion</span><span class="o">){</span>
            <span class="k">return</span> <span class="n">elementos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">posicion</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas la app, se debería poder eliminar un Elemento haciendo <em>swipe</em>.</strong></p><h3 id="itemview"><span class="mr-2">ItemView</span><a href="#itemview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Ahora haremos que cuando se toque en un ViewHolder, el detalle del Elemento que esté rellenado en él, se muestre en la pantalla de Mostrar Elemento.</p><p>Para detectar el toque en un ViewHolder, esta clase guarda en la variable <code class="language-plaintext highlighter-rouge">itemView</code> el elemento raíz del layout, es decir, todo el layout completo. Pondremos en esta variable <code class="language-plaintext highlighter-rouge">itemView</code> el <code class="language-plaintext highlighter-rouge">OnClickListener</code> para que se detecte el click en qualquier parte del ViewHolder.</p><p>La acción a realizar cuando se haga click en el <code class="language-plaintext highlighter-rouge">itemView</code> será navegar a la pantalla <code class="language-plaintext highlighter-rouge">MostrarElementoFragment</code>, pero previamente guardaremos en el ViewModel cuál ha sido el Elemento asociado al ViewHolder en el que se ha hecho click.</p><p>Creamos esta variable <code class="language-plaintext highlighter-rouge">elementoSeleccionado</code> en el ViewModel, y métodos <em>setter/getter</em> para establecerla y obtenerla:</p><p><code class="language-plaintext highlighter-rouge">ElementosViewModel.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ElementosViewModel</span> <span class="kd">extends</span> <span class="nc">AndroidViewModel</span> <span class="o">{</span>
    <span class="c1">//...</span>

    <span class="nc">MutableLiveData</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="n">elementoSeleccionado</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MutableLiveData</span><span class="o">&lt;&gt;();</span>


    <span class="c1">//...</span>

    <span class="kt">void</span> <span class="nf">seleccionar</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">){</span>
        <span class="n">elementoSeleccionado</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">elemento</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nc">MutableLiveData</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;</span> <span class="nf">seleccionado</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">elementoSeleccionado</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p>Ahora ya podemos implementar el <em>onclick</em>:</p><p><code class="language-plaintext highlighter-rouge">RecyclerElementosFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// ...</span>
<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">ElementoViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>

    <span class="n">holder</span><span class="o">.</span><span class="na">itemView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">seleccionar</span><span class="o">(</span><span class="n">elemento</span><span class="o">);</span>
            <span class="n">navController</span><span class="o">.</span><span class="na">navigate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_recyclerElementosFragment_to_mostrarElementoFragment</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>

<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas la app, se debería navegar a la pantalla de detalle cuando se toca un elemento (aunque esta pantalla aparecerá vacía por el momento).</strong></p><h2 id="mostrarelementofragment"><span class="mr-2">MostrarElementoFragment</span><a href="#mostrarelementofragment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Esta pantalla, muestra el detalle del Elemento que ha sido seleccionado en el RecyclerView.</p><p>Observará la variable <code class="language-plaintext highlighter-rouge">elementoSeleccionado</code> del ViewModel, y rellenará el layout con sus datos.</p><p>También establecemos un <em>listener</em> al RatingBar que permita modificar su valoración:</p><p><code class="language-plaintext highlighter-rouge">MostrarElementoFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MostrarElementoFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">//...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//...</span>

        <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">seleccionado</span><span class="o">().</span><span class="na">observe</span><span class="o">(</span><span class="n">getViewLifecycleOwner</span><span class="o">(),</span> <span class="k">new</span> <span class="nc">Observer</span><span class="o">&lt;</span><span class="nc">Elemento</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onChanged</span><span class="o">(</span><span class="nc">Elemento</span> <span class="n">elemento</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">binding</span><span class="o">.</span><span class="na">nombre</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">nombre</span><span class="o">);</span>
                <span class="n">binding</span><span class="o">.</span><span class="na">descripcion</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">descripcion</span><span class="o">);</span>
                <span class="n">binding</span><span class="o">.</span><span class="na">valoracion</span><span class="o">.</span><span class="na">setRating</span><span class="o">(</span><span class="n">elemento</span><span class="o">.</span><span class="na">valoracion</span><span class="o">);</span>

                <span class="n">binding</span><span class="o">.</span><span class="na">valoracion</span><span class="o">.</span><span class="na">setOnRatingBarChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">RatingBar</span><span class="o">.</span><span class="na">OnRatingBarChangeListener</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRatingChanged</span><span class="o">(</span><span class="nc">RatingBar</span> <span class="n">ratingBar</span><span class="o">,</span> <span class="kt">float</span> <span class="n">rating</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">fromUser</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span><span class="o">(</span><span class="n">fromUser</span><span class="o">){</span>
                            <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">actualizar</span><span class="o">(</span><span class="n">elemento</span><span class="o">,</span> <span class="n">rating</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>
        <span class="o">});</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas la app, esta pantalla debería mostrar el detalle del Elemento.</strong></p><h2 id="nuevoelementofragment"><span class="mr-2">NuevoElementoFragment</span><a href="#nuevoelementofragment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>La pantalla <code class="language-plaintext highlighter-rouge">NuevoElementoFragment</code> permite introducir el <code class="language-plaintext highlighter-rouge">nombre</code> y <code class="language-plaintext highlighter-rouge">descripcion</code> de un Elemento y llama al método insertar() del ViewModel para añadirlo a la lista (cuando se hace clic en el botón).</p><p>Automáticamente, vuelve a la pantalla anterior con <code class="language-plaintext highlighter-rouge">popBackStack()</code>:</p><p><code class="language-plaintext highlighter-rouge">NuevoElementoFragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NuevoElementoFragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>
    <span class="c1">//...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//...</span>

        <span class="n">binding</span><span class="o">.</span><span class="na">crear</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">nombre</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="na">nombre</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
                <span class="nc">String</span> <span class="n">descripcion</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="na">descripcion</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>

                <span class="n">elementosViewModel</span><span class="o">.</span><span class="na">insertar</span><span class="o">(</span><span class="k">new</span> <span class="nc">Elemento</span><span class="o">(</span><span class="n">nombre</span><span class="o">,</span> <span class="n">descripcion</span><span class="o">));</span>

                <span class="n">navController</span><span class="o">.</span><span class="na">popBackStack</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Si ejecutas la app, esta pantalla debería permitir añadir Elementos.</strong></p><h2 id="práctica"><span class="mr-2">Práctica</span><a href="#práctica" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Implementa una app que muestre una interfaz Master/Detail.</p><p><img data-src="https://i.imgur.com/fP26C53.png" alt="" data-proofer-ignore></p><p>Los elementos de la lista pueden ser cualquiera (pokemons, lols, productos, libros, etc…), y deben estar predefinidos en el <strong>Model</strong>.</p><p>No es necesario que implementes la funcionalidad de añadir elementos, ni modificar, ni eliminar.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/documentacion/categories/android/'>Android</a>, <a href='/documentacion/categories/recyclerview/'>recyclerview</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/documentacion/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/documentacion/tags/recyclerview/" class="post-tag no-text-decoration" >recyclerview</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=RecyclerView+-+Documentaci%C3%B3n&url=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Frecyclerview%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=RecyclerView+-+Documentaci%C3%B3n&u=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Frecyclerview%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Frecyclerview%2F&text=RecyclerView+-+Documentaci%C3%B3n" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/documentacion/posts/fisicas-de-botw/">Físicas de The Legend of Zelda - Breath of the Wild</a><li><a href="/documentacion/posts/metodologia-testing/">Metodología sobre el testeo de software</a><li><a href="/documentacion/posts/principios-de-dise%C3%B1o-onboarding/">Principios de diseño: Onboarding</a><li><a href="/documentacion/posts/android-cheatsheet/">Android Cheat Sheet</a><li><a href="/documentacion/posts/navigation/">Navigation</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/documentacion/tags/android/">android</a> <a class="post-tag" href="/documentacion/tags/java/">java</a> <a class="post-tag" href="/documentacion/tags/json/">json</a> <a class="post-tag" href="/documentacion/tags/api/">api</a> <a class="post-tag" href="/documentacion/tags/template/">template</a> <a class="post-tag" href="/documentacion/tags/analisis/">analisis</a> <a class="post-tag" href="/documentacion/tags/c/">c</a> <a class="post-tag" href="/documentacion/tags/cheatsheet/">cheatsheet</a> <a class="post-tag" href="/documentacion/tags/design/">design</a> <a class="post-tag" href="/documentacion/tags/firebase/">firebase</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/documentacion/posts/principios-de-dise%C3%B1o-onboarding/"><div class="card-body"> <em class="small" data-ts="1656298800" data-df="DD/MM/YYYY" > 27/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Principios de diseño: Onboarding</h3><div class="text-muted small"><p> Onboarding El Onboarding es una unboxing virtual que ayuda a los usuarios a comenzar con una aplicación. Como usarlo El Onboarding tiene que tener un objetivo específico enfocado a nivel de fami...</p></div></div></a></div><div class="card"> <a href="/documentacion/posts/navigation/"><div class="card-body"> <em class="small" data-ts="1654665120" data-df="DD/MM/YYYY" > 08/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Navigation</h3><div class="text-muted small"><p> Navigation El componente Navigation incluye una clase NavigationUI. Esta clase contiene métodos estáticos que administran la navegación con el NavigationView, el BottomNavigationView y el OptionsM...</p></div></div></a></div><div class="card"> <a href="/documentacion/posts/android-cheatsheet/"><div class="card-body"> <em class="small" data-ts="1654676580" data-df="DD/MM/YYYY" > 08/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Cheat Sheet</h3><div class="text-muted small"><p> Android Cheat Sheet ViewBinding build.gradle android { buildFeatures { viewBinding true } } Activity.java setContentView((binding = ActivityMainBinding.inflate(getLayoutInflat...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/documentacion/posts/android-cheatsheet/" class="btn btn-outline-primary" prompt="Anterior"><p>Android Cheat Sheet</p></a> <a href="/documentacion/posts/principios-de-dise%C3%B1o-onboarding/" class="btn btn-outline-primary" prompt="Nuevo"><p>Principios de diseño: Onboarding</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/documentacion/tags/android/">android</a> <a class="post-tag" href="/documentacion/tags/java/">java</a> <a class="post-tag" href="/documentacion/tags/json/">json</a> <a class="post-tag" href="/documentacion/tags/api/">api</a> <a class="post-tag" href="/documentacion/tags/template/">template</a> <a class="post-tag" href="/documentacion/tags/analisis/">analisis</a> <a class="post-tag" href="/documentacion/tags/c/">c</a> <a class="post-tag" href="/documentacion/tags/cheatsheet/">cheatsheet</a> <a class="post-tag" href="/documentacion/tags/design/">design</a> <a class="post-tag" href="/documentacion/tags/firebase/">firebase</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/mariiiodorado_">Mario Dorado Martínez</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> (function () { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE ? "dark" : "default"); let config = {theme: expectedTheme}; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function () { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Create mermaid tag */ $("pre").has("code.language-mermaid").each(function () { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<pre class=\"mermaid\">${svgCode}</pre>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); })(); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/documentacion/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/documentacion/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/documentacion/unregister.js"></script>
