<!DOCTYPE html><html lang="es-ES" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Fragments" /><meta name="author" content="mdoradom" /><meta property="og:locale" content="es_ES" /><meta name="description" content="https://gerardfp.github.io/dam/m8/uf1/fragments/" /><meta property="og:description" content="https://gerardfp.github.io/dam/m8/uf1/fragments/" /><link rel="canonical" href="https://mdoradom.github.io/documentacion/posts/fragments/" /><meta property="og:url" content="https://mdoradom.github.io/documentacion/posts/fragments/" /><meta property="og:site_name" content="Documentación" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-03T11:25:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Fragments" /><meta name="twitter:site" content="@mariiiodorado_" /><meta name="twitter:creator" content="@mariiiodorado_" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"mdoradom","url":"https://github.com/mdoradom/"},"dateModified":"2022-06-08T16:01:00+02:00","datePublished":"2022-06-03T11:25:00+02:00","description":"https://gerardfp.github.io/dam/m8/uf1/fragments/","headline":"Fragments","mainEntityOfPage":{"@type":"WebPage","@id":"https://mdoradom.github.io/documentacion/posts/fragments/"},"url":"https://mdoradom.github.io/documentacion/posts/fragments/"}</script><title>Fragments | Documentación</title><link rel="apple-touch-icon" sizes="180x180" href="/documentacion/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/documentacion/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/documentacion/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/documentacion/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/documentacion/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Documentación"><meta name="application-name" content="Documentación"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/documentacion/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/documentacion/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/documentacion/" class="mx-auto"> <img src="/documentacion/assets/images/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/documentacion/">Documentación</a></div><div class="site-subtitle font-italic">Sobre cosas en general</div></div><ul class="w-100"><li class="nav-item"> <a href="/documentacion/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/documentacion/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/documentacion/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/documentacion/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/documentacion/links/" class="nav-link"> <i class="fa-fw fas fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>LINKS</span> </a><li class="nav-item"> <a href="/documentacion/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ACERCA DE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/mdoradom" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/mariiiodorado_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mariodoradomartinez','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/documentacion/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/documentacion/"> Inicio </a> </span> <span>Fragments</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Fragments</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1654248300" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 03/06/2022 </em> </span> <span> Actualizado <em class="" data-ts="1654696860" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 08/06/2022 </em> </span><div class="d-flex justify-content-between"> <span> Por <em> <a href="https://github.com/mdoradom/">mdoradom</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2442 palabras"> <em>13 min</em> de lectura</span></div></div></div><div class="post-content"><p>https://gerardfp.github.io/dam/m8/uf1/fragments/</p><h1 id="fragments">Fragments</h1><p>El objetivo de esta práctica es trabajar con <strong>Fragments</strong>.</p><p>Un <a href="https://developer.android.com/reference/android/app/Fragment.html">Fragment</a> representa un comportamiento o una parte de la interfaz de usuario en una <a href="https://developer.android.com/reference/android/app/Activity.html">Activity</a>.</p><p>Puedes combinar múltiples fragmentos en una sola actividad para crear una IU multipanel y volver a usar un fragmento en múltiples actividades. Puedes pensar en un fragmento como una sección modular de una actividad que tiene su ciclo de vida propio, recibe sus propios eventos de entrada y que puedes agregar o quitar mientras la actividad se esté ejecutando (algo así como una “subactividad” que puedes volver a usar en diferentes actividades).</p><p>Programaremos un proceso de <a href="https://greaterdanorequalto.com/dont-waste-time-on-onboarding/">onboarding</a> para una app:</p><p><img data-src="https://i.imgur.com/zhLPclY.gif" alt="" data-proofer-ignore></p><p><a href="https://github.com/gerardfp/fragments">https://github.com/gerardfp/fragments</a></p><h2 id="vista-general-del-componente-navigation"><span class="mr-2">Vista general del componente Navigation</span><a href="#vista-general-del-componente-navigation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>El componente Navigation consiste en tres partes clave:</p><ol><li><p><strong>Navigation Graph</strong> (XML resource) - Es un recurso que contiene toda la información relativa a la navegación en un lugar centralizado. Esto incluye todos los lugares de la app, conocidas como <strong>destinos</strong>, y todos los caminos posibles que un usuario puede tomar en la app</p><p><img data-src="https://i.imgur.com/PzxngWA.png" alt="" data-proofer-ignore></p><li><p><strong>NavHostFragment</strong> (Layout XML) - Es un widget especial que añades al layout. En él se muestran los diferentes destinos del Grafo de Navegación.</p><p><img data-src="https://i.imgur.com/PUrHITh.png" alt="" data-proofer-ignore></p><li><p><strong>NavController</strong> (Java object) - Es un objeto que realiza un seguimiento de la posición actual dentro del grafo de navegación. Realiza el intercambio del contenido de destino en el NavHostFragment según el usuario se mueve por el grafo de navegación.</p></ol><p>Cuando navegas, utilizas el objeto NavController, diciéndole dónde quieres ir o qué camino quieres tomar en <strong>Grafo de Navegación</strong>. El NavController mostrará el destino apropiado en el NavHostFragment.</p><h2 id="crea-el-proyecto"><span class="mr-2">Crea el proyecto</span><a href="#crea-el-proyecto" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ol><li><p>Selecciona Empty Activity como plantilla para la MainActivity</p><li><p>Añade las dependencias para incluir el soporte Navigation:</p><p><code class="language-plaintext highlighter-rouge">build.gradle</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">dependencies</span> <span class="o">{</span>
<span class="c1">//...</span>

  <span class="n">implementation</span> <span class="s">"androidx.navigation:navigation-fragment:2.3.0
  implementation "</span><span class="n">androidx</span><span class="o">.</span><span class="na">navigation</span><span class="o">:</span><span class="n">navigation</span><span class="o">-</span><span class="nl">ui:</span><span class="mf">2.3</span><span class="o">.</span><span class="mi">0</span>
<span class="o">}</span> 
</pre></table></code></div></div><p><em>Puedes añadir las dependencias ahora mismo, o también puedes dejar que sea el propio Android Studio el que las añada automáticamente cuando crees el grafo de navegación en la siguiente sección.</em></p></ol><h2 id="crea-el-grafo-de-navegación"><span class="mr-2">Crea el Grafo de Navegación</span><a href="#crea-el-grafo-de-navegación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Sobre la carpeta raiz del proyecto haz clic-derecho y selecciona <code class="language-plaintext highlighter-rouge">New &gt; Android Resource File</code></p><p>Introduce el nombre del fichero del grafo, por ejemplo: <code class="language-plaintext highlighter-rouge">nav_graph</code>.<br /> En el <code class="language-plaintext highlighter-rouge">Resource type</code> selecciona <code class="language-plaintext highlighter-rouge">Navigation</code></p><p><img data-src="https://i.imgur.com/A3LIqkV.gif" alt="" data-proofer-ignore></p><h3 id="añade-los-fragments-al-grafo-de-navegación"><span class="mr-2">Añade los fragments al grafo de navegación</span><a href="#añade-los-fragments-al-grafo-de-navegación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Añadiremos 3 destinos al grafo de navegación. Dos destinos para el <em>Onboarding</em>, y uno que será la pantalla <em>Home</em> de la app.</p><p><img data-src="https://i.imgur.com/K4sXuRm.png" alt="" data-proofer-ignore></p><p>Abre el fichero <code class="language-plaintext highlighter-rouge">res/navigation/nav_graph.xml</code> en modo <code class="language-plaintext highlighter-rouge">Design</code>, y haz click sobre el icono “<strong>New Destination</strong>” <img data-src="https://i.imgur.com/YJEb50v.png" alt="" data-proofer-ignore></p><p><img data-src="https://i.imgur.com/FkrfQRe.png" alt="" data-proofer-ignore></p><p>Haz click en <code class="language-plaintext highlighter-rouge">Create new destination</code></p><p><img data-src="https://i.imgur.com/5UEyAeS.png" alt="" data-proofer-ignore></p><p>Seleciona <code class="language-plaintext highlighter-rouge">Fragment (Blank)</code> como plantilla para el Fragment:</p><p><img data-src="https://i.imgur.com/Nl7UKRp.png" alt="" data-proofer-ignore></p><p>Introduce el nombre <code class="language-plaintext highlighter-rouge">Onboarding1Fragment</code>:</p><p><img data-src="https://i.imgur.com/mdBszet.png" alt="" data-proofer-ignore></p><p>Repite el proceso para crear los fragments <code class="language-plaintext highlighter-rouge">Onboarding2Fragment</code> y <code class="language-plaintext highlighter-rouge">HomeFragment</code></p><p><img data-src="https://i.imgur.com/g4z8psN.png" alt="" data-proofer-ignore></p><p>El icono <img data-src="https://i.imgur.com/2dqLMTw.png" alt="" data-proofer-ignore> sobre el <code class="language-plaintext highlighter-rouge">onboarding1Fragment</code> indica que este es el destino que se mostrará en primer lugar: el <strong>Start Destination</strong>.</p><p>Puedes cambiar en cualquier momento el Start Destination seleccionando un destino y clicando en el icono <img data-src="https://i.imgur.com/2dqLMTw.png" alt="" data-proofer-ignore> de la barra.</p><h3 id="conecta-los-destinos"><span class="mr-2">Conecta los destinos</span><a href="#conecta-los-destinos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>La navegación entre destinos se define creando <strong>acciones</strong> de navegación.</p><p>Para crear una <strong>acción</strong> hay que hacer clic sobre el manejador de orgien de un destino y arrastrarlo sobre el siguiente destino:</p><p><img data-src="https://i.imgur.com/lSdAnGp.gif" alt="" data-proofer-ignore></p><p>Crea las 2 acciones de navegación:</p><ol><li>Del <code class="language-plaintext highlighter-rouge">onboarding1Fragment</code> al <code class="language-plaintext highlighter-rouge">onboarding2Fragment</code><li>Del <code class="language-plaintext highlighter-rouge">onboarding2Fragment</code> al <code class="language-plaintext highlighter-rouge">homeFragment</code></ol><p><img data-src="https://i.imgur.com/w0IqTzO.png" alt="" data-proofer-ignore></p><p>Observa que en el código XML del archivo <code class="language-plaintext highlighter-rouge">res/navigation/nav_graph.xml</code> se han añadido las <code class="language-plaintext highlighter-rouge">&lt;action&gt;</code> de navegación:</p><p><code class="language-plaintext highlighter-rouge">res/navigation/nav_graph.xml</code></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>...

<span class="nt">&lt;action</span>
    <span class="na">android:id=</span><span class="s">"@+id/action_onboarding1Fragment_to_onboarding2Fragment"</span>
    <span class="na">app:destination=</span><span class="s">"@id/onboarding2Fragment"</span><span class="nt">/&gt;</span>
...

<span class="nt">&lt;action</span>
    <span class="na">android:id=</span><span class="s">"@+id/action_onboarding2Fragment_to_homeFragment"</span>
    <span class="na">app:destination=</span><span class="s">"@id/homeFragment"</span> <span class="nt">/&gt;</span>
...
</pre></table></code></div></div><p>Más adelante utilizaremos los identificadores de estas acciones para implementar la navegación.</p><h2 id="añade-el-navhost"><span class="mr-2">Añade el NavHost</span><a href="#añade-el-navhost" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>En el layout de la <code class="language-plaintext highlighter-rouge">MainActivity</code> (<code class="language-plaintext highlighter-rouge">activity_main.xml</code>) añade un <code class="language-plaintext highlighter-rouge">&lt;FragmentContainerView&gt;</code> que será el NavHostFragment:</p><p><code class="language-plaintext highlighter-rouge">res/layout/activity_main.xml</code></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;androidx.fragment.app.FragmentContainerView</span>
        <span class="na">android:name=</span><span class="s">"androidx.navigation.fragment.NavHostFragment"</span>
        <span class="na">android:id=</span><span class="s">"@+id/nav_host_fragment"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">app:defaultNavHost=</span><span class="s">"true"</span>
        <span class="na">app:navGraph=</span><span class="s">"@navigation/nav_graph"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</pre></table></code></div></div><p>Puedes ver el <code class="language-plaintext highlighter-rouge">NavHostFragment</code> como un hueco en el cual se irán poniendo los diferentes destinos según se vaya navegando. Observa que lo hemos enlazado con el grafo de navegación que acabamos de crear mediante el atributo <code class="language-plaintext highlighter-rouge">app:navGraph="@navigation/nav_graph"</code></p><h2 id="diseña-de-las-pantallas"><span class="mr-2">Diseña de las pantallas</span><a href="#diseña-de-las-pantallas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="añade-las-imágenes"><span class="mr-2">Añade las imágenes</span><a href="#añade-las-imágenes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Puedes descargar las imágenes del repositorio del proyecto:<br /> <a href="https://github.com/mdoradom/documentacion/post/fragments/onboarding1.svg">onboarding1.svg</a><br /> <a href="https://github.com/mdoradom/documentacion/post/fragments/onboarding2.svg">onboarding2.svg</a></p><p>O puedes usar las imágenes que quieras, por ejemplo de <a href="https://undraw.co">unDraw</a>, <a href="https://www.drawkit.io/">DrawKit</a>, <a href="https://www.humaaans.com/">humaaans</a>, <a href="https://designs.ai/graphicmaker/">design.ai</a>…</p><p>Encima del directorio <code class="language-plaintext highlighter-rouge">app</code>, haz clic-derecho y selecciona <code class="language-plaintext highlighter-rouge">New &gt; Vector Asset</code></p><p><img data-src="https://i.imgur.com/1mHvh0M.png" alt="" data-proofer-ignore></p><p>Selecciona <code class="language-plaintext highlighter-rouge">Asset Type:</code> <strong>Local file</strong> e introduce la ruta del fichero <code class="language-plaintext highlighter-rouge">onboarding1.svg</code>:</p><p><img data-src="/documentacionfragments/e6e53296705f0522.png" alt="" data-proofer-ignore></p><p>Repite lo mismo para la imagen <code class="language-plaintext highlighter-rouge">onboarding2.svg</code>.</p><p><img data-src="https://i.imgur.com/uEaxXOQ.png" alt="" data-proofer-ignore></p><h3 id="diseña-el-layout"><span class="mr-2">Diseña el layout</span><a href="#diseña-el-layout" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Por defecto, el layout de los fragments creados contiene un <code class="language-plaintext highlighter-rouge">FrameLayout</code>. Este layout está pensado para contener un único <em>child</em>. Cambiémoslo por un <code class="language-plaintext highlighter-rouge">ConstraintLayout</code>:</p><p>Abre el fichero res/layout/fragment_onboarding1.xml en modo Code y sustituye el FrameLayout por un ConstraintLayout:</p><p><img data-src="https://i.imgur.com/TBd2uDK.gif" alt="" data-proofer-ignore></p><p>En cada pantalla añadiremos una imagen, un texto y un botón:</p><p>Para añadir una imagen usamos el widget <code class="language-plaintext highlighter-rouge">ImageView</code>. La imagen que se debe mostrar se define en el atributo <code class="language-plaintext highlighter-rouge">android:src</code>.</p><p>Es importante establecer el atributo <code class="language-plaintext highlighter-rouge">android:adjustViewBounds</code> a <code class="language-plaintext highlighter-rouge">true</code>. Esto hace que los límites (el borde) del <code class="language-plaintext highlighter-rouge">ImageView</code> se ajusten al tamaño de la imagen.</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nt">&lt;ImageView</span>
<span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
<span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="na">android:adjustViewBounds=</span><span class="s">"true"</span>
<span class="na">android:src=</span><span class="s">"@drawable/ic_onboarding1"</span><span class="nt">/&gt;</span>
</pre></table></code></div></div><p>También puedes usar el modo <strong>Design</strong> para añadir la imagen:</p><p><img data-src="https://i.imgur.com/AvndR30.gif" alt="" data-proofer-ignore> <img data-src="https://i.imgur.com/Dw4Qjzz.png" alt="" data-proofer-ignore></p><p>Añadimos también el <code class="language-plaintext highlighter-rouge">TextView</code> y el <code class="language-plaintext highlighter-rouge">Button</code>.</p><p>Modificamos algunos atributos para añadir colores de fondo, paddings, tamaños de letra, etc… También creamos las <em>constraints</em> necesarias y definimos unos <strong>identificadores</strong> apropiados.</p><p>El layout <code class="language-plaintext highlighter-rouge">fragment_onboarding1.xml</code> queda finalmente así:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
<span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="na">android:background=</span><span class="s">"#4CAF50"</span>
<span class="na">android:padding=</span><span class="s">"32dp"</span><span class="nt">&gt;</span>

<span class="nt">&lt;ImageView</span>
    <span class="na">android:id=</span><span class="s">"@+id/imagen"</span>
    <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:adjustViewBounds=</span><span class="s">"true"</span>
    <span class="na">android:src=</span><span class="s">"@drawable/ic_onboarding1"</span>
    <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/texto"</span>
    <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;TextView</span>
    <span class="na">android:id=</span><span class="s">"@+id/texto"</span>
    <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:text=</span><span class="s">"!Discover the garlic soup!"</span>
    <span class="na">android:textColor=</span><span class="s">"#FFFFFF"</span>
    <span class="na">android:textSize=</span><span class="s">"30sp"</span>
    <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/botonSiguiente"</span>
    <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@id/imagen"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;Button</span>
    <span class="na">android:id=</span><span class="s">"@+id/botonSiguiente"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:backgroundTint=</span><span class="s">"#FFEB3B"</span>
    <span class="na">android:text=</span><span class="s">"Next"</span>
    <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@id/texto"</span>
    <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</pre></table></code></div></div><p>El resultado es este:</p><p><img data-src="https://i.imgur.com/95j5Qhe.png" alt="" data-proofer-ignore></p><p>Para el <code class="language-plaintext highlighter-rouge">fragment_onboarding2.xml</code> cambiamos la imagen, el texto y los colores:</p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
<span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="na">android:background=</span><span class="s">"#00BCD4"</span>
<span class="na">android:padding=</span><span class="s">"32dp"</span><span class="nt">&gt;</span>

<span class="nt">&lt;ImageView</span>
    <span class="na">android:id=</span><span class="s">"@+id/imagen"</span>
    <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:adjustViewBounds=</span><span class="s">"true"</span>
    <span class="na">android:src=</span><span class="s">"@drawable/ic_onboarding2"</span>
    <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/texto"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;TextView</span>
    <span class="na">android:id=</span><span class="s">"@+id/texto"</span>
    <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:text=</span><span class="s">"¡Blow and make bottles!"</span>
    <span class="na">android:textColor=</span><span class="s">"#FFFFFF"</span>
    <span class="na">android:textSize=</span><span class="s">"30sp"</span>
    <span class="na">app:layout_constraintBottom_toTopOf=</span><span class="s">"@+id/botonFinalizar"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@id/imagen"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;Button</span>
    <span class="na">android:id=</span><span class="s">"@+id/botonFinalizar"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:backgroundTint=</span><span class="s">"#FFC107"</span>
    <span class="na">android:text=</span><span class="s">"Finish"</span>
    <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintLeft_toLeftOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintRight_toRightOf=</span><span class="s">"parent"</span>
    <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@id/texto"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</pre></table></code></div></div><p><img data-src="https://i.imgur.com/2qIx9gQ.png" alt="" data-proofer-ignore></p><p><em>El diseño de la pantalla Home la obviamos en esta práctica, ya que depende de la app que se vaya a implementar.</em></p><h2 id="implementa-la-navegación"><span class="mr-2">Implementa la Navegación</span><a href="#implementa-la-navegación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>El siguiente paso es añadir los <em>listeners</em> a los botones para que al ser pulsados naveguen a la siguiente pantalla.</p><p>Abrimos el fichero <code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code>. En este fichero vemos un código <em>boilerplate</em> generado por el asistente. Por el momento este código no nos interesa, así que <strong>borramos</strong> todo lo que hay antes del método <code class="language-plaintext highlighter-rouge">onCreateView()</code>, hasta dejar la clase <code class="language-plaintext highlighter-rouge">Onboarding1Fragment</code> así:</p><p><code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding1</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Con ViewBinding:</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">FragmentOnboarding1Binding</span> <span class="n">binding</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">binding</span> <span class="o">=</span> <span class="nc">FragmentOnboarding1Binding</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">inflater</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">)).</span><span class="na">getRoot</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Este método <code class="language-plaintext highlighter-rouge">onCreateView()</code> es similar a la llamada a <code class="language-plaintext highlighter-rouge">setContentView()</code> que vimos en la práctica anterior. Su función es <strong>establecer el fichero de layout</strong> para el Fragment, es decir, lo que se verá cuando se navegue a este fragment.</p><h3 id="implementa-el-método-onviewcreated"><span class="mr-2">Implementa el método onViewCreated()</span><a href="#implementa-el-método-onviewcreated" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>De forma general, podemos decir que el código que se ha de ejecutar en un fragment se pone en el método <code class="language-plaintext highlighter-rouge">onViewCreated()</code>. Este método lo ejecutará el Sistema Android una vez se haya establecido el layout del Fragment, es decir, cuando haya terminado el <code class="language-plaintext highlighter-rouge">onCreateView()</code>.</p><p>Implementemos este método:</p><p><code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding1</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="añade-los-listeners-a-los-botones"><span class="mr-2">Añade los listeners a los botones</span><a href="#añade-los-listeners-a-los-botones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Tal como vimos en la práctica anterior, el primer paso será <strong>vincular los botones</strong> que hemos añadido en el layout XML <strong>con variables Java</strong>. Para ello usamos el método <code class="language-plaintext highlighter-rouge">findViewById()</code>.</p><p>Cuando trabajamos con fragments las llamadas a <code class="language-plaintext highlighter-rouge">findViewById()</code> las realizaremos en sobre el parámetro view, del método <code class="language-plaintext highlighter-rouge">onViewCreated()</code>. Este parámatro view que nos pasa el Sistema Android corresponde al layout que se creó en el método <code class="language-plaintext highlighter-rouge">onCreateView()</code>.</p><p><img data-src="https://i.imgur.com/KeaBCz6.png" alt="" data-proofer-ignore></p><p>Declaramos la variable para el botón y usamos <code class="language-plaintext highlighter-rouge">findViewById()</code> para vincularlo al botón del XML:</p><p><code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nc">Button</span> <span class="n">botonSiguiente</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding2</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">botonSiguiente</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">botonSiguiente</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Si has usado ViewBinding, no es necesario crear la variable <code class="language-plaintext highlighter-rouge">botonSiguiente</code> ni llamar a <code class="language-plaintext highlighter-rouge">findViewById()</code>. Simplemente accede al botón con <code class="language-plaintext highlighter-rouge">binding.botonSiguiente</code>.</p><p>El segundo paso será añadir el <em>listener</em> al <code class="language-plaintext highlighter-rouge">botonSiguiente</code>:</p><p><code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nc">Button</span> <span class="n">botonSiguiente</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding2</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">botonSiguiente</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">botonSiguiente</span><span class="o">);</span>

        <span class="n">botonSiguiente</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// navegar al onboarding2</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="usa-el-navcontroller-para-navegar-entre-destinos"><span class="mr-2">Usa el NavController para navegar entre destinos</span><a href="#usa-el-navcontroller-para-navegar-entre-destinos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para navegar a los diferentes destinos, android proporciona la clase <code class="language-plaintext highlighter-rouge">NavController</code>. Esta clase es la responsable de intercambiar en el <code class="language-plaintext highlighter-rouge">NavHost</code> los diferentes fragments de la app.</p><p>Para usar el <code class="language-plaintext highlighter-rouge">NavController</code>, primero lo guardamos en una variable con el método <code class="language-plaintext highlighter-rouge">Navigation.findNavController()</code>, y luego ya podemos llamar al método <code class="language-plaintext highlighter-rouge">navigate()</code> y pasarle la acción de navegacion que se debe realizar.</p><ol><li><p>Recuperamos el NavController con <code class="language-plaintext highlighter-rouge">findNavController()</code>:</p><p><code class="language-plaintext highlighter-rouge">Onboarding1Fragment.java</code></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nc">Button</span> <span class="n">botonSiguiente</span><span class="o">;</span>
    <span class="nc">NavController</span> <span class="n">navController</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding2</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">navController</span> <span class="o">=</span> <span class="nc">Navigation</span><span class="o">.</span><span class="na">findNavController</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

        <span class="n">botonSiguiente</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">botonSiguiente</span><span class="o">);</span>

        <span class="n">botonSiguiente</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// navegar al onboarding2</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span> 
</pre></table></code></div></div><li><p>Llamamos al metodo <code class="language-plaintext highlighter-rouge">navigate()</code> dentro del <em>listener</em> para que navegue al siguiente Fragment cuando se haga clic en el botón:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/java/com/company/p2onboarding/Onboarding1Fragment.java">Onboarding1Fragment.java</a></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding1Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nc">Button</span> <span class="n">botonSiguiente</span><span class="o">;</span>
    <span class="nc">NavController</span> <span class="n">navController</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding2</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">navController</span> <span class="o">=</span> <span class="nc">Navigation</span><span class="o">.</span><span class="na">findNavController</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

        <span class="n">botonSiguiente</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">botonSiguiente</span><span class="o">);</span>

        <span class="n">botonSiguiente</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">navController</span><span class="o">.</span><span class="na">navigate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_onboarding1Fragment_to_onboarding2Fragment</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>El parámetro pasado al método <code class="language-plaintext highlighter-rouge">navigate()</code> es el identificador de la <strong>acción de navegación</strong> que se debe realizar. En este caso del <em>onboarding1 al onboarding2</em>.</p></ol><p>Repetimos el mismo proceso en el <code class="language-plaintext highlighter-rouge">Onboarding2Fragment</code>, cambiando el identificador del botón, y el identificador de la acción de navegación:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/java/com/company/p2onboarding/Onboarding2Fragment.java">Onboarding2Fragment.java</a></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Onboarding2Fragment</span> <span class="kd">extends</span> <span class="nc">Fragment</span> <span class="o">{</span>

    <span class="nc">Button</span> <span class="n">botonFinalizar</span><span class="o">;</span>
    <span class="nc">NavController</span> <span class="n">navController</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">View</span> <span class="nf">onCreateView</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LayoutInflater</span> <span class="n">inflater</span><span class="o">,</span> <span class="nc">ViewGroup</span> <span class="n">container</span><span class="o">,</span>
                                <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">fragment_onboarding2</span><span class="o">,</span> <span class="n">container</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onViewCreated</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">View</span> <span class="n">view</span><span class="o">,</span> <span class="nd">@Nullable</span> <span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onViewCreated</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">savedInstanceState</span><span class="o">);</span>

        <span class="n">navController</span> <span class="o">=</span> <span class="nc">Navigation</span><span class="o">.</span><span class="na">findNavController</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

        <span class="n">botonFinalizar</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">botonFinalizar</span><span class="o">);</span>

        <span class="n">botonFinalizar</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">navController</span><span class="o">.</span><span class="na">navigate</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">action_onboarding2Fragment_to_homeFragment</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>Ahora puedes ejecutar la app y probar la navegación.</strong></p><h2 id="añade-transiciones-a-la-navegación"><span class="mr-2">Añade transiciones a la navegación</span><a href="#añade-transiciones-a-la-navegación" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Por defecto la transición entre los destinos de navagación es bastante insulsa. Simplemente coloca un destino sobre otro.</p><p>Podemos personalizar la manera en que aparece el fragment de destino y la manera en que desaparece el fragment de origen.</p><p>Las transiciones de una acción de navegación (<code class="language-plaintext highlighter-rouge">&lt;action&gt;</code>) se definen en 4 atributos:</p><ul><li><code class="language-plaintext highlighter-rouge">enterAnim</code> y <code class="language-plaintext highlighter-rouge">exitAnim</code>: definen como entra el fragment destino y como sale el fragment origen, <strong>cuando se navega “hacia adelante”</strong><li><code class="language-plaintext highlighter-rouge">popEnterAnim</code> y <code class="language-plaintext highlighter-rouge">popExitAnim</code>: definen la transición <strong>cuando se navega “hacia atrás”</strong> (pulsando el botón atrás)</ul><p>Android incorpora una serie de animaciones por defecto, y también permite definir tus propias animaciones. Haremos lo segundo.</p><h3 id="define-las-animaciones"><span class="mr-2">Define las animaciones</span><a href="#define-las-animaciones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Para esta aplicación haremos que el fragment destino aparezca deslizándose desde la derecha, y el fragment origen desaparezca deslizándose hacia la izquierda:</p><p>Para ello, definiremos cuatro animaciones: <code class="language-plaintext highlighter-rouge">slide_in_right</code>, <code class="language-plaintext highlighter-rouge">slide_in_left</code>, <code class="language-plaintext highlighter-rouge">slide_out_right</code> y <code class="language-plaintext highlighter-rouge">slide_out_left</code>.</p><p>Sobre el directiorio <strong>app</strong>, haz clic-derecho y selecciona <code class="language-plaintext highlighter-rouge">New &gt; Android Resource File</code></p><p><img data-src="https://i.imgur.com/WMs2Dmv.png" alt="" data-proofer-ignore></p><p>Introduce el nombre de la animación <code class="language-plaintext highlighter-rouge">slide_in_right</code>, y selecciona <code class="language-plaintext highlighter-rouge">Animation</code> como <strong>Resource Type</strong>:</p><p><img data-src="https://i.imgur.com/3v8U3Vt.png" alt="" data-proofer-ignore></p><p>En el fichero <code class="language-plaintext highlighter-rouge">res/anim/slide_in_right.xml</code> que se ha creado, define la animación <code class="language-plaintext highlighter-rouge">slide_in_right</code>:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/res/anim/slide_in_right.xml">slide_in_right.xml</a></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span><span class="nt">&gt;</span>
<span class="nt">&lt;translate</span>
    <span class="na">android:fromXDelta=</span><span class="s">"100%"</span> <span class="na">android:toXDelta=</span><span class="s">"0%"</span>
    <span class="na">android:duration=</span><span class="s">"700"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></table></code></div></div><p>Define también la animación <code class="language-plaintext highlighter-rouge">slide_out_left</code>:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/res/anim/slide_out_left.xml">slide_out_left.xml</a></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span><span class="nt">&gt;</span>
<span class="nt">&lt;translate</span>
    <span class="na">android:fromXDelta=</span><span class="s">"0%"</span> <span class="na">android:toXDelta=</span><span class="s">"-100%"</span>
    <span class="na">android:duration=</span><span class="s">"700"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></table></code></div></div><p>La animación <code class="language-plaintext highlighter-rouge">slide_out_right</code>:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/res/anim/slide_out_right.xml">slide_out_right.xml</a></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span><span class="nt">&gt;</span>
<span class="nt">&lt;translate</span>
    <span class="na">android:fromXDelta=</span><span class="s">"0%"</span> <span class="na">android:toXDelta=</span><span class="s">"100%"</span>
    <span class="na">android:duration=</span><span class="s">"700"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></table></code></div></div><p>Y la animación <code class="language-plaintext highlighter-rouge">slide_in_left</code>:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/res/anim/slide_in_left.xml">slide_in_left.xml</a></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;set</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span><span class="nt">&gt;</span>
<span class="nt">&lt;translate</span>
    <span class="na">android:fromXDelta=</span><span class="s">"-100%"</span> <span class="na">android:toXDelta=</span><span class="s">"0%"</span>
    <span class="na">android:duration=</span><span class="s">"700"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/set&gt;</span>
</pre></table></code></div></div><p>En las animaciones que hemos creado, simplemente realizamos un movimiento (<code class="language-plaintext highlighter-rouge">translate</code>) horizontal (<code class="language-plaintext highlighter-rouge">fromXDelta</code> &amp; <code class="language-plaintext highlighter-rouge">toXDelta</code>).</p><p>Hay diversos tipos de animación que se pueden crear: transparencias, tamaños, rotación.</p><p>Para +info consulta: <a href="https://developer.android.com/guide/topics/resources/animation-resource#View">Animación de vistas</a>.</p><p>Además de las animaciones en la navegación, Android incorpora el <code class="language-plaintext highlighter-rouge">MotionLayout</code> para crear animaciones dentro de una “pantalla”. Consulta <a href="https://developer.android.com/studio/write/motion-editor">Construye animaciones con el Motion Editor</a></p><h3 id="asigna-las-animaciones-a-las-acciones"><span class="mr-2">Asigna las animaciones a las acciones</span><a href="#asigna-las-animaciones-a-las-acciones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Abre el fichero <code class="language-plaintext highlighter-rouge">nav_graph.xml</code> y establece los siguientes atributos a las <strong>dos</strong> acciones:</p><p><a href="https://github.com/gerardfp/fragments/blob/master/app/src/main/res/navigation/nav_graph.xml">nav_graph.xml</a></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>...

<span class="nt">&lt;action</span>
    <span class="err">...</span>

    <span class="na">app:enterAnim=</span><span class="s">"@anim/slide_in_right"</span>
    <span class="na">app:exitAnim=</span><span class="s">"@anim/slide_out_left"</span>
    <span class="na">app:popEnterAnim=</span><span class="s">"@anim/slide_in_left"</span>
    <span class="na">app:popExitAnim=</span><span class="s">"@anim/slide_out_right"</span> <span class="nt">/&gt;</span>

...
</pre></table></code></div></div><p>También lo puedes hacer en modo <strong>Design</strong>.</p><p>Selecciona cada acción y establece los atributos <code class="language-plaintext highlighter-rouge">enterAnim</code>, <code class="language-plaintext highlighter-rouge">exitAnim</code>, <code class="language-plaintext highlighter-rouge">popEnterAnim</code> y <code class="language-plaintext highlighter-rouge">popExitAnim</code>:</p><p><img data-src="https://i.imgur.com/l3ps52P.png" alt="" data-proofer-ignore></p><p>El resultado final es este:</p><p><img data-src="https://i.imgur.com/zhLPclY.gif" alt="" data-proofer-ignore></p><h2 id="práctica-onboarding"><span class="mr-2">Práctica: Onboarding</span><a href="#práctica-onboarding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Implementa un Onboarding de 3 pantallas. En las dos primeras debe haber una opción para omitir (<em>skip</em>). Utilitza diferentes animaciones en cada acción de navegación.</p><p>Ejemplo:</p><p><img data-src="https://i.imgur.com/1zQWBk1.gif" alt="" data-proofer-ignore></p><p>Grafo de navegación:</p><p><img data-src="https://i.imgur.com/hhBNBdl.png" alt="" data-proofer-ignore></p><hr /><p>Webgrafía:</p><ul><li><a href="https://gerardfp.github.io/">gerardfp.github.io</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/documentacion/categories/android/'>Android</a>, <a href='/documentacion/categories/fragments/'>fragments</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/documentacion/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/documentacion/tags/fragments/" class="post-tag no-text-decoration" >fragments</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Fragments+-+Documentaci%C3%B3n&url=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Ffragments%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Fragments+-+Documentaci%C3%B3n&u=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Ffragments%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmdoradom.github.io%2Fdocumentacion%2Fposts%2Ffragments%2F&text=Fragments+-+Documentaci%C3%B3n" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/documentacion/posts/fisicas-de-botw/">Físicas de The Legend of Zelda - Breath of the Wild</a><li><a href="/documentacion/posts/metodologia-testing/">Metodología sobre el testeo de software</a><li><a href="/documentacion/posts/principios-de-dise%C3%B1o-onboarding/">Principios de diseño: Onboarding</a><li><a href="/documentacion/posts/android-cheatsheet/">Android Cheat Sheet</a><li><a href="/documentacion/posts/navigation/">Navigation</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/documentacion/tags/android/">android</a> <a class="post-tag" href="/documentacion/tags/java/">java</a> <a class="post-tag" href="/documentacion/tags/json/">json</a> <a class="post-tag" href="/documentacion/tags/api/">api</a> <a class="post-tag" href="/documentacion/tags/template/">template</a> <a class="post-tag" href="/documentacion/tags/analisis/">analisis</a> <a class="post-tag" href="/documentacion/tags/c/">c</a> <a class="post-tag" href="/documentacion/tags/cheatsheet/">cheatsheet</a> <a class="post-tag" href="/documentacion/tags/design/">design</a> <a class="post-tag" href="/documentacion/tags/firebase/">firebase</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/documentacion/posts/principios-de-dise%C3%B1o-onboarding/"><div class="card-body"> <em class="small" data-ts="1656298800" data-df="DD/MM/YYYY" > 27/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Principios de diseño: Onboarding</h3><div class="text-muted small"><p> Onboarding El Onboarding es una unboxing virtual que ayuda a los usuarios a comenzar con una aplicación. Como usarlo El Onboarding tiene que tener un objetivo específico enfocado a nivel de fami...</p></div></div></a></div><div class="card"> <a href="/documentacion/posts/navigation/"><div class="card-body"> <em class="small" data-ts="1654665120" data-df="DD/MM/YYYY" > 08/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Navigation</h3><div class="text-muted small"><p> Navigation El componente Navigation incluye una clase NavigationUI. Esta clase contiene métodos estáticos que administran la navegación con el NavigationView, el BottomNavigationView y el OptionsM...</p></div></div></a></div><div class="card"> <a href="/documentacion/posts/android-cheatsheet/"><div class="card-body"> <em class="small" data-ts="1654676580" data-df="DD/MM/YYYY" > 08/06/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Cheat Sheet</h3><div class="text-muted small"><p> Android Cheat Sheet ViewBinding build.gradle 1 2 3 4 5 android { buildFeatures { viewBinding true } } Activity.java 1 setContentView((binding = ActivityMainBinding.inflate(get...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/documentacion/posts/firebase-primeros-pasos/" class="btn btn-outline-primary" prompt="Anterior"><p>Primeros pasos en Firebase</p></a> <a href="/documentacion/posts/velneo/" class="btn btn-outline-primary" prompt="Nuevo"><p>Documentación Velneo</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/documentacion/tags/android/">android</a> <a class="post-tag" href="/documentacion/tags/java/">java</a> <a class="post-tag" href="/documentacion/tags/json/">json</a> <a class="post-tag" href="/documentacion/tags/api/">api</a> <a class="post-tag" href="/documentacion/tags/template/">template</a> <a class="post-tag" href="/documentacion/tags/analisis/">analisis</a> <a class="post-tag" href="/documentacion/tags/c/">c</a> <a class="post-tag" href="/documentacion/tags/cheatsheet/">cheatsheet</a> <a class="post-tag" href="/documentacion/tags/design/">design</a> <a class="post-tag" href="/documentacion/tags/firebase/">firebase</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/mariiiodorado_">Mario Dorado Martínez</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/documentacion/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/documentacion/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/documentacion/unregister.js"></script>
